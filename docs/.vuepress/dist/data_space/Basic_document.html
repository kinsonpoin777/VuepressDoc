<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OPEN API Doc</title>
    <meta name="description" content="接口说明文档">
    <link rel="icon" href="/bitbug_favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.584498ef.css" as="style"><link rel="preload" href="/assets/js/app.db21f27a.js" as="script"><link rel="preload" href="/assets/js/2.82b08f5a.js" as="script"><link rel="preload" href="/assets/js/5.ddaaa47b.js" as="script"><link rel="prefetch" href="/assets/js/10.22aa21c7.js"><link rel="prefetch" href="/assets/js/11.2b479cd9.js"><link rel="prefetch" href="/assets/js/12.d0a30bd4.js"><link rel="prefetch" href="/assets/js/13.e1c32ab9.js"><link rel="prefetch" href="/assets/js/14.a358029f.js"><link rel="prefetch" href="/assets/js/15.b95dcb64.js"><link rel="prefetch" href="/assets/js/3.69a9e6aa.js"><link rel="prefetch" href="/assets/js/4.2a9a9e3e.js"><link rel="prefetch" href="/assets/js/6.898b7d41.js"><link rel="prefetch" href="/assets/js/7.04069a34.js"><link rel="prefetch" href="/assets/js/8.13be9294.js"><link rel="prefetch" href="/assets/js/9.4b85b1ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.584498ef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OPEN API Doc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Guide.html" class="sidebar-link">接入指南</a></li><li><a href="/IOT.html" class="sidebar-link">IOT通讯协议</a></li><li><a href="/Application_of_API.html" class="sidebar-link">应用API</a></li><li><a href="/Video_service.html" class="sidebar-link">视频服务</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数字空间</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/data_space/Basic_document.html" class="active sidebar-link">数字空间基础能力接口文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_1-1-简介" class="sidebar-link">1.1.简介</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_1-2-特性与定义" class="sidebar-link">1.2.特性与定义</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_1-3-应用场景" class="sidebar-link">1.3.应用场景</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_1-4-名词解释" class="sidebar-link">1.4.名词解释</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-对象地理object-geo" class="sidebar-link">2.1.对象地理object-geo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-1-wid查询坐标" class="sidebar-link">2.1.1.  WID查询坐标</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-2-坐标查询wid" class="sidebar-link">2.1.2.  坐标查询WID</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-3-wid查询父级包含位置信息" class="sidebar-link">2.1.3.  WID查询父级包含位置信息</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-4-批量查询对象" class="sidebar-link">2.1.4.  批量查询对象</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-5-批量查询地理对象" class="sidebar-link">2.1.5.  批量查询地理对象</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-6-保存-编辑自定义边界" class="sidebar-link">2.1.6.  保存/编辑自定义边界</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-7-查询poicode分类编码" class="sidebar-link">2.1.7.  查询POICODE分类编码</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-8-din查询设备信息" class="sidebar-link">2.1.8.  DIN查询设备信息</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_2-1-9-din查询信息及设备父级地理包含关系" class="sidebar-link">2.1.9.  DIN查询信息及设备父级地理包含关系</a></li></ul></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-1-设备影子" class="sidebar-link">3.1.设备影子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-1-1-获取设备影子数据" class="sidebar-link">3.1.1.  获取设备影子数据</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-1-2-更新设备影子期望数据接口" class="sidebar-link">3.1.2.  更新设备影子期望数据接口</a></li></ul></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-2-业务历史数据" class="sidebar-link">3.2.业务历史数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-2-1-获取设备原始历史数据" class="sidebar-link">3.2.1.  获取设备原始历史数据</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-2-2-获取应用原始历史数据" class="sidebar-link">3.2.2.  获取应用原始历史数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-3-消息订阅" class="sidebar-link">3.3.消息订阅</a></li><li class="sidebar-sub-header"><a href="/data_space/Basic_document.html#_3-4-告警-通知消息上报" class="sidebar-link">3.4.告警/通知消息上报</a></li></ul></li><li><a href="/data_space/Metro_documents.html" class="sidebar-link">业务场景接口文档--地铁场景</a></li><li><a href="/data_space/Data_guide.html" class="sidebar-link">数字空间数据上报及实时数据获取指南-建筑类</a></li></ul></section></li><li><a href="/Error_code.html" class="sidebar-link">错误码</a></li><li><a href="/appendix.html" class="sidebar-link">附录</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>[TOC]</p> <h1 id="微瓴数字空间基础能力服务接口"><a href="#微瓴数字空间基础能力服务接口" aria-hidden="true" class="header-anchor">#</a> 微瓴数字空间基础能力服务接口</h1> <h1 id="_1-概述"><a href="#_1-概述" aria-hidden="true" class="header-anchor">#</a> <strong>1.</strong> <strong>概述</strong></h1> <h2 id="_1-1-简介"><a href="#_1-1-简介" aria-hidden="true" class="header-anchor">#</a> 1.1.简介</h2> <p>微瓴DataSpace即微瓴数字空间，提供所有关于数据的计算、存储、管理与分发，包括<strong>静态地理</strong>数据的格式规范、编码体系、数据管理、模型构建；<strong>动态物联设备</strong>数据的系统对接、协议标准、数据上报、解析转换、分析清洗、逻辑流转、规则联动等服务。</p> <p>应用开发商、设备开发者可通过数字空间提供的可视化配置，实现简单易用的配置管理和规则联动，以微服务架构来设计分布式调用逻辑，基于简单、实用、灵活的理念，每一个服务拥有各自的某一端到端业务场景（功能）与数据（数据库），服务之间互相不共享，避免产生依赖或继承抽象的接口、服务、模块。</p> <h2 id="_1-2-特性与定义"><a href="#_1-2-特性与定义" aria-hidden="true" class="header-anchor">#</a> 1.2.特性与定义</h2> <p>接入微瓴：见微瓴开放平台说明：</p> <p>（https://open.welink.qq.com/#/dev-resource/guide/platform）</p> <p>你可以上报设备数据（状态、位置、）</p> <p>通过微瓴可以获得的数据：</p> <p><strong>A.</strong> <strong>静态数据（低频变化）</strong></p> <p>​	基础地理</p> <p>​	地图</p> <p>​	路线</p> <p>​	地点</p> <p>​	设备地理</p> <p><strong>B.</strong> <strong>动态数据（高频变化）</strong></p> <p>​	物联设备</p> <p>​	水电煤气表</p> <p>​	能源、空调、冷机、给排水、消防、报警、广播、变配电、电梯、门禁等</p> <p>​	移动对象（人、车、Robot位置）</p> <p>​	上报位置</p> <p>​	获取实时定位</p> <p><strong>C.</strong> <strong>数据挖掘服务</strong></p> <p>​      统计与分析</p> <p>​      数据学习</p> <h2 id="_1-3-应用场景"><a href="#_1-3-应用场景" aria-hidden="true" class="header-anchor">#</a> 1.3.应用场景</h2> <p>应用场景举例，见章节5</p> <h2 id="_1-4-名词解释"><a href="#_1-4-名词解释" aria-hidden="true" class="header-anchor">#</a> 1.4.名词解释</h2> <p><strong>wId</strong></p> <p>为唯一ID，可理解为身份证，全平台通用字段，以参数形式使用。</p> <p>wid可代表</p> <p>静态的（建筑、楼层、房间、地点），</p> <p>动态的（物联设备、移动对象人、车、机器人）</p> <p>某种组合服务等。</p> <p><strong>POIID</strong></p> <p>地理层级ID，可表达地理嵌套关系，具体可参考下图地理层级关系图。</p> <p><img src="/assets/img/dili.94522a53.png" alt="Alt text"></p> <p>父子包含关系通过POIID规则继承示意图</p> <p><strong>POICODE</strong></p> <p>分类编码，区分不同种类。查询方法 见2.2.9</p> <p><strong>Projectid</strong></p> <p>项目id号。</p> <p>与物联设备控制有关</p> <p><strong>DIN</strong></p> <p>物联设备唯一标识，可以是物联网关</p> <p><strong>Subid</strong></p> <p>子设备id，同一个物联网关可级联多个子设备，通过子设备id实现独立控制。</p> <p>与权限验证及登录有关</p> <p><strong>token</strong></p> <p>动态密钥，有效时间20分钟，需重新登录。所有访问均需要带着token来获取。</p> <p><strong>appid</strong></p> <p>应用系统的 id，由平台分配，在开放平台注册申请。</p> <p>https://open.welink.qq.com/#/dev-resource/guide/app-access</p> <p><strong>appsecret</strong></p> <p>同上。</p> <p><strong>app_ticket</strong></p> <p>用于登录API的应用票据，app_ticket有时间期限，请注意及时更新票据</p> <p><strong>Sig</strong></p> <p>加密的密文，用于登录API使用，生成方式见生成签名样例</p> <p>生成规则，参考以下链接中的“签名机制”。</p> <p>https://open.welink.qq.com/#/dev-resource/api/user-guide</p> <p><strong>DP</strong></p> <p>Datapoint,在微瓴物联平台申请的功能 ID</p> <p><strong>message_type</strong></p> <table><thead><tr><th><strong>message_type</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>1000100</td> <td>文本消息广播至相关联的应用系统</td></tr> <tr><td>1000101</td> <td>Json消息广播至相关联的应用系统</td></tr> <tr><td>1000200</td> <td>发送文本消息至其他应用系统</td></tr> <tr><td>1000201</td> <td>发送Json消息至其他应用系统</td></tr> <tr><td>1000300</td> <td>推送告警类消息给微瓴平台，不直接推送给应用，微瓴平台会针对告警消息的业务类别推送给相应的业务应用</td></tr> <tr><td>1000302</td> <td>推送告警类消息给微瓴平台，不直接推送给应用，微瓴平台会针对告警消息的业务类别推送给相应的业务应用</td></tr> <tr><td>1000400</td> <td>推送通知类消息给微瓴平台，不直接推送给应用，微瓴平台会针对通知消息的业务类别推送给相应的业务应用</td></tr> <tr><td>1000500</td> <td>推送普通消息给微瓴平台作为数据存储，不推送给应用</td></tr></tbody></table> <p><strong>设备影子</strong></p> <p>设备影子是服务器端为设备缓存的一份状态和配置数据，代表着物理设备的一个数字化映射。</p> <p>(TODO )</p> <p><strong>消息订阅</strong></p> <p>(TODO 实现能力、 websocket 等)</p> <h1 id="_2-微瓴静态数据接口"><a href="#_2-微瓴静态数据接口" aria-hidden="true" class="header-anchor">#</a> <strong>2.</strong> <strong>微瓴静态数据接口</strong></h1> <h2 id="_2-1-对象地理object-geo"><a href="#_2-1-对象地理object-geo" aria-hidden="true" class="header-anchor">#</a> 2.1.对象地理object-geo</h2> <h3 id="_2-1-1-wid查询坐标"><a href="#_2-1-1-wid查询坐标" aria-hidden="true" class="header-anchor">#</a> 2.1.1.  WID查询坐标</h3> <ul><li><strong>功能描述</strong>
获取某对象的基本空间信息。</li> <li><strong>请求URL:</strong><code>/space/geo/object/getByWId</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th>必填</th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>wId</td> <td>String</td> <td>是</td> <td>非空且长度固定36位</td> <td>（<strong>注意是wId路径参数</strong>） 对象的唯一标识</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/object/getByWId
?wId=0007e43d-45d7-44c0-acfc-fc5539b6516a
&amp;token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>返回参数</strong></li></ul> <table><tr><td colspan="2">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="2">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="2">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="2">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td style="width:90px;"></td> <td>wId</td> <td>string</td> <td>对象的唯一标识</td> <td>&quot;0007e43d-45d7-44c0-acfc-fc5539b6516a&quot;,</td></tr> <tr><td></td> <td>poiId</td> <td>string</td> <td>POI编号</td> <td>&quot;4403002230221018_9&quot;,</td></tr> <tr><td></td> <td>name</td> <td>string</td> <td>设备名称</td> <td>&quot;蓝牙ibeacon&quot;,</td></tr> <tr><td></td> <td>boothId</td> <td>string</td> <td>现场编号</td> <td>&quot;&quot;,</td></tr> <tr><td></td> <td>level</td> <td>number</td> <td>对象所属层级</td> <td>9,</td></tr> <tr><td></td> <td>longitude</td> <td>number</td> <td>经度gcj20</td> <td>113.935327719,</td></tr> <tr><td></td> <td>latitude</td> <td>number</td> <td>纬度</td> <td>22.522594372,</td></tr> <tr><td></td> <td>height</td> <td>number</td> <td>绝对高度</td> <td>86.45,</td></tr> <tr><td></td> <td>poiCode</td> <td>string</td> <td>分类编码</td> <td>&quot;w0907015&quot;,</td></tr> <tr><td></td> <td>sn</td> <td>string</td> <td>设备SN实际编码</td> <td>&quot;1918FC0636A0&quot;,</td></tr> <tr><td></td> <td>positionText</td> <td>string</td> <td>位置描述</td> <td>&quot;腾讯滨海大厦滨海南塔F18&quot;</td></tr></table> <ul><li><strong>返回示例</strong></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0007e43d-45d7-44c0-acfc-fc5539b6516a&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230221018_9&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;蓝牙ibeacon&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;boothId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935327719</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.522594372</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">86.45</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w0907015&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;sn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1918FC0636A0&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_滨海南塔_F18&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_2-1-2-坐标查询wid"><a href="#_2-1-2-坐标查询wid" aria-hidden="true" class="header-anchor">#</a> 2.1.2.  坐标查询WID</h3> <ul><li><strong>功能描述</strong></li></ul> <p>获取包含指定坐标位置和指定父级空间对象的空间对象列表，如已知某设备对象的坐标和设备所在楼层，查询空间范围上包含该设备的自定义区域等。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/getObjectsContainLocation</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th style="text-align:left;"><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><div style="width:35px;"><strong>必填</strong></div></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td style="text-align:left;">location</td> <td>String</td> <td>是</td> <td>非空</td> <td>坐标位置，经纬度，格式：“纬度,经度”，如22.522646,113.935486</td></tr> <tr><td style="text-align:left;">parentPoiId</td> <td>String</td> <td>是</td> <td>非空</td> <td>父级对象的空间id ，如滨海大厦 '440300223022'</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/getObjectsContainLocation
?location=22.522646%2C113.935486
&amp;parentPoiId=44030022
&amp;token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>返回参数</strong></li></ul> <table><tr><td colspan="2">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="2">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="2">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="2">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td style="width:100px;"></td> <td>wId</td> <td>string</td> <td>对象的唯一标识</td> <td>&quot;638d5b0a-744d-4643-a7a6-cfc489875105&quot;,</td></tr> <tr><td></td> <td>poiId</td> <td>string</td> <td>POI编号</td> <td>&quot;4403002230221007&quot;,</td></tr> <tr><td></td> <td>name</td> <td>string</td> <td>设备名称</td> <td>&quot;F7&quot;,</td></tr> <tr><td></td> <td>level</td> <td>number</td> <td>对象所属层级</td> <td>7,</td></tr> <tr><td></td> <td>longitude</td> <td>number</td> <td>经度gcj20</td> <td>113.935327719,</td></tr> <tr><td></td> <td>latitude</td> <td>number</td> <td>纬度</td> <td>22.522594372,</td></tr> <tr><td></td> <td>height</td> <td>number</td> <td>绝对高度</td> <td>35,</td></tr> <tr><td></td> <td>poiCode</td> <td>string</td> <td>分类编码</td> <td>&quot; m99999000&quot;,</td></tr> <tr><td></td> <td>positionText</td> <td>string</td> <td>位置描述</td> <td>&quot;腾讯滨海大厦_F7&quot;</td></tr></table> <ul><li><strong>返回示例</strong></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    ​<span class="token punctuation">{</span>
      ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;638d5b0a-744d-4643-a7a6-cfc489875105&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230221007&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F7&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.93536231722</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5228742683381</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m99999000&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_F7&quot;</span>​
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_2-1-3-wid查询父级包含位置信息"><a href="#_2-1-3-wid查询父级包含位置信息" aria-hidden="true" class="header-anchor">#</a> 2.1.3.  WID查询父级包含位置信息</h3> <ul><li><strong>功能描述</strong></li></ul> <p>通过WID查询对象的父级空间包含关系及位置信息。例如：某个智能设备level9，查询此设备所处的level8房间名、level7楼层、level6建筑名等。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/object/getLocationByWId</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空长度固定128位</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>wId</td> <td>String</td> <td>是</td> <td>非空长度固定36位</td> <td>（<strong>注意是wId路径参数</strong>） 对象的唯一标识</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/object/getLocationByWId
?wId=00019062-f1bd-4538-b5bf-14030ce7970d
&amp;token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="3">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="3">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="3">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="3">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td colspan="2">wId</td> <td>string</td> <td>对象的唯一标识</td> <td>&quot;0007e43d-45d7-44c0-acfc-fc5539b6516a&quot;,</td></tr> <tr><td></td> <td colspan="2">poiId</td> <td>string</td> <td>POI编号</td> <td>&quot;4403002230221018_9&quot;,</td></tr> <tr><td></td> <td colspan="2">name</td> <td>string</td> <td>设备名称</td> <td>&quot;蓝牙ibeacon&quot;,</td></tr> <tr><td></td> <td colspan="2">level</td> <td>number</td> <td>对象所属层级</td> <td>9,</td></tr> <tr><td></td> <td colspan="2">longitude</td> <td>number</td> <td>经度gcj20</td> <td>113.935327719,</td></tr> <tr><td></td> <td colspan="2">latitude</td> <td>number</td> <td>纬度</td> <td>22.522594372,</td></tr> <tr><td></td> <td colspan="2">height</td> <td>number</td> <td>绝对高度</td> <td>86.45,</td></tr> <tr><td></td> <td colspan="2">poiCode</td> <td>string</td> <td>分类编码</td> <td>&quot;w0907015&quot;,</td></tr> <tr><td></td> <td colspan="2">positionText</td> <td>string</td> <td>位置描述</td> <td>&quot;腾讯滨海大厦_滨海南塔_F18&quot;</td></tr> <tr><td></td> <td colspan="2">location</td> <td>array</td> <td>数组（父级别）</td> <td></td></tr> <tr><td></td> <td></td> <td>wId</td> <td>string</td> <td>对象的唯一标识</td> <td></td></tr> <tr><td></td> <td></td> <td>poiId</td> <td>string</td> <td>POI编号</td> <td></td></tr> <tr><td></td> <td></td> <td>name</td> <td>string</td> <td>设备名称</td> <td></td></tr> <tr><td></td> <td></td> <td>level</td> <td>number</td> <td>对象所属层级</td> <td></td></tr> <tr><td></td> <td></td> <td>longitude</td> <td>number</td> <td>经度gcj20</td> <td></td></tr> <tr><td></td> <td></td> <td>latitude</td> <td>number</td> <td>纬度</td> <td></td></tr> <tr><td></td> <td></td> <td>height</td> <td>number</td> <td>绝对高度</td> <td></td></tr> <tr><td></td> <td></td> <td>poiCode</td> <td>string</td> <td>分类编码</td> <td></td></tr> <tr><td></td> <td></td> <td>positionText</td> <td>string</td> <td>位置描述</td> <td></td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00019062-f1bd-4538-b5bf-14030ce7970d&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;44030022302210280510308&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;工位&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935115841964</span><span class="token punctuation">,</span>
    <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5230798095138</span><span class="token punctuation">,</span>
    <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">128.9</span><span class="token punctuation">,</span>
    <span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m00403000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_F28_工位&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a66348f2-0700-1000-abcd-35269c4636aa&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;440300223022&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935131878688</span><span class="token punctuation">,</span>
        <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.52347513938</span><span class="token punctuation">,</span>
        <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">-6.3</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e0ace2f8-3823-4acc-989a-4db7bcf35f54&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230221028&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F28&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.93536231722</span><span class="token punctuation">,</span>
        <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5228742683381</span><span class="token punctuation">,</span>
        <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">128.9</span><span class="token punctuation">,</span>
        <span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m99999000&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_F28&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="_2-1-4-批量查询对象"><a href="#_2-1-4-批量查询对象" aria-hidden="true" class="header-anchor">#</a> 2.1.4.  批量查询对象</h3> <ul><li><strong>功能描述</strong></li></ul> <p>​        批量返回某个建筑范围内的所有父子对象列表，如：已知某建筑wId（level6），查询本建筑的所有楼层（level7）、某层楼的所有房间（level8）等。关于不同层级对象的 POIID 与 Level 定义，见“名词解释”中 POIID 的介绍。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/object/getSubObjects</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>wId</td> <td>String</td> <td>是</td> <td>非空且长度固定36位</td> <td>对象的唯一标识，例如填入大厦wid或者楼层wid</td></tr> <tr><td>poiCode</td> <td>String</td> <td>是</td> <td>不超过64个字符</td> <td>分类编码，详见2.2.9查询分类编码接口，<br>例如：洗手间m00201、车位号m00500000、照明灯具w0107006</td></tr> <tr><td>level</td> <td>String</td> <td>是</td> <td></td> <td>7（楼层）、8（房间）、9（设备点）</td></tr> <tr><td>offset</td> <td>String</td> <td>是</td> <td></td> <td>偏移量，默认为0</td></tr> <tr><td>limit</td> <td>String</td> <td>是</td> <td></td> <td></td></tr> <tr><td>name</td> <td>String</td> <td>否</td> <td></td> <td></td></tr> <tr><td>srid</td> <td>String</td> <td>否</td> <td></td> <td>默认值为4326</td></tr> <tr><td>dinNotEmpty</td> <td>Boolean</td> <td>否</td> <td></td> <td>默认值为False</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/object/getSubObjects
?level=8
&amp;offset=0
&amp;limit=2
&amp;wId=a66348f2-0700-1000-abcd-35269c4636aa
&amp;poiCode=m
&amp;token=
&amp;name=
&amp;srid=
&amp;dinNotEmpty=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="2">名称</td> <td>类型</td> <td>描述</td></tr> <tr><td colspan="2">code</td> <td>String</td> <td>0表示成功，非0表示出错</td></tr> <tr><td colspan="2">success</td> <td>Boolean</td> <td>true 表示成功，false 表示出错</td></tr> <tr><td colspan="2">data</td> <td>array</td> <td>对象数组</td></tr> <tr><td></td> <td>wId</td> <td>String</td> <td>对象的唯一标识，例如填入大厦wid或者楼层wid</td></tr> <tr><td></td> <td>poiId</td> <td>String</td> <td>poiID见继承规则</td></tr> <tr><td></td> <td>Name</td> <td>String</td> <td>名称</td></tr> <tr><td></td> <td>Level</td> <td>Number</td> <td>7（楼层）、8（房间）、9（设备点）</td></tr> <tr><td></td> <td>Longitude</td> <td>Number</td> <td>经度，</td></tr> <tr><td></td> <td>Latitude</td> <td>Number</td> <td>纬度，</td></tr> <tr><td></td> <td>Height</td> <td>Number</td> <td>高度，相对高度，非绝对海拔</td></tr> <tr><td></td> <td>PoiCode</td> <td>String</td> <td>分类编码，详见查询分类编码接口，例如：洗手间m00201、车位号m00500000、照明灯具w0107006</td></tr> <tr><td></td> <td>totalRow</td> <td>Number</td> <td>返回数量</td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;features&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.523381873802</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bae86426-d9b5-43ed-9e94-3e7238d7b83b&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F31&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230221031&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m99999000&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">141.95</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935474696462</span>​
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalRow&quot;</span><span class="token operator">:</span> <span class="token number">12</span>​
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_2-1-5-批量查询地理对象"><a href="#_2-1-5-批量查询地理对象" aria-hidden="true" class="header-anchor">#</a> 2.1.5.  批量查询地理对象</h3> <ul><li><strong>功能描述</strong></li></ul> <p>批量返回某个空间范围内的所有对象列表，如：某栋建筑的所有楼层（level7）、某层楼的所有房间（level8）、某个房间内的某种设备（level9）等。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/object/getGeoSubObjects</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>wId</td> <td>String</td> <td>是</td> <td>非空且长度固定36位</td> <td>对象的唯一标识，例如填入大厦wid或者楼层wid</td></tr> <tr><td>poiCode</td> <td>String</td> <td>是</td> <td>不超过64个字符</td> <td>分类编码，详见2.2.9查询分类编码接口，<br>例如：洗手间m00201、车位号m00500000、照明灯具w0107006</td></tr> <tr><td>level</td> <td>String</td> <td>是</td> <td></td> <td>7（楼层）、8（房间）、9（设备点）</td></tr> <tr><td>name</td> <td>String</td> <td>否</td> <td></td> <td></td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/object/getGeoSubObjects
?poiCode=m99
&amp;level=7
&amp;name=F7
&amp;token=
&amp;wId=a66348f2-0700-1000-abcd-35269c4636aa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="5">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="5">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="5">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="5">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td colspan="4">totalRow</td> <td>number</td> <td></td> <td></td></tr> <tr><td></td> <td colspan="4">type</td> <td>string</td> <td></td> <td></td></tr> <tr><td></td> <td colspan="4">features</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">geometry</td> <td>array</td> <td>空间对象</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">coordinates</td> <td>array</td> <td>对象坐标串</td> <td>如果是面第一个点与最后一个点相同</td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>longitude,Latitude</td> <td>Number</td> <td>经度，纬度</td> <td>点1</td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>longitude,Latitude</td> <td>Number</td> <td>经度，纬度</td> <td>点N</td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">type</td> <td>string</td> <td>空间对象的几何类型</td> <td>例如：复合多线'MultiLineString', 多边形'Polygon',复合多边形 'MultiPolygon', </td></tr> <tr><td></td> <td></td> <td colspan="3">id</td> <td>string</td> <td>对象的唯一标识</td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">type</td> <td>string</td> <td>类型</td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">properties</td> <td>array</td> <td>数组（属性）</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">wId</td> <td>string</td> <td>对象的唯一标识</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">poiId</td> <td>string</td> <td>POI编号</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">name</td> <td>string</td> <td>设备名称</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">level</td> <td>number</td> <td>对象所属层级</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">longitude</td> <td>number</td> <td>经度gcj20</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">latitude</td> <td>number</td> <td>纬度</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">height</td> <td>number</td> <td>绝对高度</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">poiCode</td> <td>string</td> <td>分类编码</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">positionText</td> <td>string</td> <td>位置描述</td> <td></td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;features&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;geometry&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​<span class="token property">&quot;coordinates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            ​<span class="token punctuation">[</span>
              ​<span class="token punctuation">[</span>
                ​<span class="token punctuation">[</span>
                  ​<span class="token number">113.935474696462</span><span class="token punctuation">,</span>
                  ​<span class="token number">22.523381873802</span>​
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                ​<span class="token punctuation">[</span>
                  ​<span class="token number">113.935487513624</span><span class="token punctuation">,</span>
                  ​<span class="token number">22.5233446500345</span>​
                <span class="token punctuation">]</span>​
              <span class="token punctuation">]</span>​
            <span class="token punctuation">]</span>​
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MultiPolygon&quot;</span>​
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bae86426-d9b5-43ed-9e94-3e7238d7b83b&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Feature&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​<span class="token property">&quot;gid&quot;</span><span class="token operator">:</span> <span class="token number">18196</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.523381873802</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bae86426-d9b5-43ed-9e94-3e7238d7b83b&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F31&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230221031&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m99999000&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">141.95</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935474696462</span>​
        <span class="token punctuation">}</span>​
      <span class="token punctuation">}</span>​
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FeatureCollection&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_2-1-6-保存-编辑自定义边界"><a href="#_2-1-6-保存-编辑自定义边界" aria-hidden="true" class="header-anchor">#</a> 2.1.6.  保存/编辑自定义边界</h3> <ul><li><strong>功能描述</strong></li></ul> <p>保存或者编辑自定义边界对象。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/saveMetaArea</code></li> <li><strong>请求方式:</strong><code>POST</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>https://api.weiling.qq.com/space/geo/saveMetaArea?token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>请求包体</strong></li></ul> <p><strong>格式： application/json</strong></p> <p><strong>中心点模式的自定义边界：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试123&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">-6.3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token number">99901000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;extMetaArea&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;parentPoiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230220001&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;point&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;center&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935250639562</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.522482718566</span>​
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;radius&quot;</span><span class="token operator">:</span> <span class="token number">400</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>多边形模式的自定义边界：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1db2977f-466c-4dae-95f0-83624e4d4c6d&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试1234&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">-6.3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;extMetaArea&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;parentPoiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230220001&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;polygon&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;points&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935250639562</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.522482718566</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935250639562</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.622482718566</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.965250639562</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.622482718566</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.965250639562</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.522482718566</span>​
      <span class="token punctuation">}</span>​
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li><strong>包体参数</strong></li></ul> <table><thead><tr><th><div style="width:48px;"><strong>参数名</strong></div></th> <th><div style="width:45px;"><strong>类型</strong></div></th> <th><div style="width:35px;"><strong>必填</strong></div></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>wId</td> <td>String</td> <td>否</td> <td>长度固定36位</td> <td>对象的唯一标识；<strong>若有 wId，表示更新；若无wId，表示新增</strong></td></tr> <tr><td>level</td> <td>Integer</td> <td>是</td> <td>数字，范围1-9</td> <td>自定义空间对象所在空间层级</td></tr> <tr><td>poiCode</td> <td>String</td> <td>是</td> <td>非空</td> <td>自定义空间对象的空间分类编码</td></tr> <tr><td>parentPoiId</td> <td>String</td> <td>是</td> <td>非空</td> <td>自定义空间对象的父级对象的 PoiId</td></tr> <tr><td><strong>mode</strong></td> <td>String</td> <td>是</td> <td>非空，point 或 polygon</td> <td>自定义空间的模式；point 表示中心点模式，使用中心点和半径表示；polygon 表示多边形模式，使用多个顺序点表示</td></tr> <tr><td>center</td> <td>Object</td> <td>否</td> <td>当mode为 point时为必须</td> <td>中心点模式的自定义边界对象的中心点坐标，经纬度</td></tr> <tr><td>radius</td> <td>Number</td> <td>否</td> <td>当 mode 为 point 时为必须</td> <td>中心点模式的自定义边界对象的半径，单位米</td></tr> <tr><td>points</td> <td>List</td> <td>否</td> <td>当mode为 polygon时必须</td> <td>多边形模式的自定义边界对象的各点坐标，经纬度；注意顺序有关</td></tr></tbody></table> <ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="4">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="4">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="4">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="4">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td colspan="3">wId</td> <td>string</td> <td>对象的唯一标识</td> <td>&quot;0007e43d-45d7-44c0-acfc-fc5539b6516a&quot;,</td></tr> <tr><td></td> <td colspan="3">poiId</td> <td>string</td> <td>POI编号</td> <td>&quot;4403002230221018_9&quot;,</td></tr> <tr><td></td> <td colspan="3">name</td> <td>string</td> <td>设备名称</td> <td>&quot;蓝牙ibeacon&quot;,</td></tr> <tr><td></td> <td colspan="3">level</td> <td>number</td> <td>对象所属层级</td> <td>9,</td></tr> <tr><td></td> <td colspan="3">longitude</td> <td>number</td> <td>经度gcj20</td> <td>113.935327719,</td></tr> <tr><td></td> <td colspan="3">latitude</td> <td>number</td> <td>纬度</td> <td>22.522594372,</td></tr> <tr><td></td> <td colspan="3">height</td> <td>number</td> <td>绝对高度</td> <td>86.45,</td></tr> <tr><td></td> <td colspan="3">poiCode</td> <td>string</td> <td>分类编码</td> <td>&quot;w0907015&quot;,</td></tr> <tr><td></td> <td colspan="3">extMetaArea</td> <td>array</td> <td>数组</td> <td>自定义区域边界</td></tr> <tr><td></td> <td></td> <td colspan="2">parentPoiId</td> <td>array</td> <td>父级别POI编号</td> <td></td></tr> <tr><td></td> <td></td> <td colspan="2">radius</td> <td>string</td> <td>对象的唯一标识</td> <td>中心点模式的自定义边界对象的半径，单位米</td></tr> <tr><td></td> <td></td> <td colspan="2">points</td> <td>array</td> <td>坐标串数组</td> <td>多边形模式的自定义边界对象的各点坐标，经纬度；注意顺序有关</td></tr> <tr><td></td> <td></td> <td></td> <td>longitude</td> <td>number</td> <td>经度gcj20</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td>latitude</td> <td>number</td> <td>纬度</td> <td></td></tr> <tr><td></td> <td></td> <td colspan="2">mode</td> <td>string</td> <td>自定义空间的模式</td> <td>例如：多边形'Polygon' </td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c11e6aed-8033-44c7-8113-b5af0816fd8e&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230220001_ma&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.950250639562</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.572482718566</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">-6.3</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;extMetaArea&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ​<span class="token property">&quot;parentPoiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230220001&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;radius&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;points&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        ​<span class="token punctuation">{</span>
          ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.522482718566</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935250639562</span>​
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ​<span class="token punctuation">{</span>
          ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.622482718566</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935250639562</span>​
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ​<span class="token punctuation">{</span>
          ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.622482718566</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.965250639562</span>​
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ​<span class="token punctuation">{</span>
          ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.522482718566</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.965250639562</span>​
        <span class="token punctuation">}</span>​
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;polygon&quot;</span>​
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_2-1-7-查询poicode分类编码"><a href="#_2-1-7-查询poicode分类编码" aria-hidden="true" class="header-anchor">#</a> 2.1.7.  查询POICODE分类编码</h3> <ul><li><strong>功能描述</strong></li></ul> <p>查询分类编码（即 PoiCode）。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/getCatalog</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>projectId</td> <td>Integer</td> <td>是</td> <td>Int32</td> <td>项目id，如11</td></tr> <tr><td>page</td> <td>Integer</td> <td>是</td> <td>Int32</td> <td>页码，第一页为page为1</td></tr> <tr><td>count</td> <td>Integer</td> <td>是</td> <td>不超过100</td> <td>一页的条目数目</td></tr> <tr><td>poiCode</td> <td>String</td> <td>是</td> <td>不超过64个字符</td> <td>空间对象的poiCode分类编码,例如：w02或m02</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/getCatalog
?projectId=11
&amp;page=1
&amp;count=10
&amp;poiCode= w0701003
&amp;token= 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="3">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="3">code</td> <td>String</td> <td>0表示成功，非0表示出错</td> <td></td></tr> <tr><td colspan="3">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="3">data</td> <td>array</td> <td>数组</td> <td></td></tr> <tr><td></td> <td colspan="2">List</td> <td>array</td> <td>数组</td> <td></td></tr> <tr><td></td> <td></td> <td>Id</td> <td>number</td> <td>分类编码表顺序</td> <td></td></tr> <tr><td></td> <td></td> <td>Name</td> <td>String</td> <td>名称</td> <td></td></tr> <tr><td></td> <td></td> <td>Level</td> <td>number</td> <td>分类编码等级</td> <td></td></tr> <tr><td></td> <td></td> <td>ParentId</td> <td>number</td> <td>上一级id号</td> <td></td></tr> <tr><td></td> <td></td> <td>ProjectId</td> <td>number</td> <td>项目编号</td> <td></td></tr> <tr><td></td> <td></td> <td>isAssets</td> <td>Boolean</td> <td>是否资产</td> <td>true 为真，false 为否</td></tr> <tr><td></td> <td></td> <td>PoiCode</td> <td>String</td> <td>分类编码</td> <td>例如：洗手间m00201、车位号m00500000、照明灯具w0107006</td></tr> <tr><td></td> <td colspan="2">pageNumber</td> <td>number</td> <td>当前页码</td> <td></td></tr> <tr><td></td> <td colspan="2">pageSize</td> <td>number</td> <td>页行数</td> <td></td></tr> <tr><td></td> <td colspan="2">totalPage</td> <td>number</td> <td>总页数</td> <td></td></tr> <tr><td></td> <td colspan="2">totalRow</td> <td>number</td> <td>返回数量</td> <td></td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4886</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;服务设施-未分类&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;projectId&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;isAssets&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m00200&quot;</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4888</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;卫生间&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">4886</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;projectId&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;isAssets&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m00201&quot;</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4894</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;便民设施&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">4888</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;projectId&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;isAssets&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m00202&quot;</span>​
      <span class="token punctuation">}</span>​...​
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;pageNumber&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;pageSize&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;totalPage&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;totalRow&quot;</span><span class="token operator">:</span> <span class="token number">12</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_2-1-8-din查询设备信息"><a href="#_2-1-8-din查询设备信息" aria-hidden="true" class="header-anchor">#</a> 2.1.8.  DIN查询设备信息</h3> <ul><li><strong>功能描述</strong></li></ul> <p>用DIN查询对象地理信息。</p> <ul><li><strong>请求URL:</strong><code>/space/inner/device/getDeviceByDeviceId</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>din</td> <td>string</td> <td>是</td> <td>通常为18位数字</td> <td></td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/inner/device/getDeviceByDeviceId
?din=144115194541786483
&amp;token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="2">名称</td> <td>类型</td> <td>描述</td></tr> <tr><td colspan="2">code</td> <td>String</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="2">success</td> <td>Boolean</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="2">data</td> <td>array</td> <td>数组</td></tr> <tr><td></td> <td>wid</td> <td>String</td> <td>对象的唯一标识，例如填入大厦wid或者楼层wid</td></tr> <tr><td></td> <td>poiId</td> <td>String</td> <td>Poi编号</td></tr> <tr><td></td> <td>boothId</td> <td>string</td> <td>现场编号</td></tr> <tr><td></td> <td>name</td> <td>String</td> <td>名称</td></tr> <tr><td></td> <td>level</td> <td>number</td> <td>层级关系: 例如7（楼层）、8（房间）、9（设备点）</td></tr> <tr><td></td> <td>longitude</td> <td>number</td> <td>经度</td></tr> <tr><td></td> <td>latitude</td> <td>number</td> <td>纬度</td></tr> <tr><td></td> <td>height</td> <td>number</td> <td>高度</td></tr> <tr><td></td> <td>poiCode</td> <td>String</td> <td>分类编码，详见查询分类编码接口，例如：洗手间m00201、车位号m00500000、照明灯具w0107006</td></tr> <tr><td></td> <td>sn</td> <td>String</td> <td>厂家编号</td></tr> <tr><td></td> <td>din</td> <td>String</td> <td>物联设备唯一标识，可以是物联网关</td></tr> <tr><td></td> <td>subID</td> <td>String</td> <td>子设备id，同一个物联网关可级联多个子设备，通过子设备id实现独立控制</td></tr> <tr><td></td> <td>positionText</td> <td>String</td> <td>位置描述信息</td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c25f5978-27e5-45be-8b49-dc4ce6e0b857&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;44030022302210250200047_9&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;优图盒子&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;boothId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北门_2501&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935307547835</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5231118649662</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">115.7</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w0713002&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;sn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;52E8DFBD562D41a0&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;din&quot;</span><span class="token operator">:</span> <span class="token string">&quot;144115194541786483&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;subId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;滨海大厦_北塔_25F_西梯-北门_2501&quot;</span>​
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_2-1-9-din查询信息及设备父级地理包含关系"><a href="#_2-1-9-din查询信息及设备父级地理包含关系" aria-hidden="true" class="header-anchor">#</a> 2.1.9.  DIN查询信息及设备父级地理包含关系</h3> <ul><li><strong>功能描述</strong></li></ul> <p>用DIN查询对象地理信息。</p> <ul><li><strong>请求URL:</strong><code>/space/geo/object/getLocationByDin</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>din</td> <td>string</td> <td>是</td> <td></td> <td>项目id，如11</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/geo/object/getLocationByDin
?din=144115194541786483
&amp;token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="3">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="3">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="3">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="3">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td colspan="2">wId</td> <td>string</td> <td>对象的唯一标识</td> <td>&quot;0007e43d-45d7-44c0-acfc-fc5539b6516a&quot;,</td></tr> <tr><td></td> <td colspan="2">poiId</td> <td>string</td> <td>POI编号</td> <td>&quot;4403002230221018_9&quot;,</td></tr> <tr><td></td> <td colspan="2">name</td> <td>string</td> <td>设备名称</td> <td>&quot;蓝牙ibeacon&quot;,</td></tr> <tr><td></td> <td colspan="2">boothId</td> <td>string</td> <td>现场编号</td> <td></td></tr> <tr><td></td> <td colspan="2">level</td> <td>number</td> <td>对象所属层级</td> <td>9,</td></tr> <tr><td></td> <td colspan="2">longitude</td> <td>number</td> <td>经度gcj20</td> <td>113.935327719,</td></tr> <tr><td></td> <td colspan="2">latitude</td> <td>number</td> <td>纬度</td> <td>22.522594372,</td></tr> <tr><td></td> <td colspan="2">height</td> <td>number</td> <td>绝对高度</td> <td>86.45,</td></tr> <tr><td></td> <td colspan="2">poiCode</td> <td>string</td> <td>分类编码</td> <td>&quot;w0907015&quot;,</td></tr> <tr><td></td> <td colspan="2">sn</td> <td>String</td> <td>厂家编号</td> <td></td></tr> <tr><td></td> <td colspan="2">din</td> <td>String</td> <td>物联设备唯一标识，可以是物联网关</td> <td></td></tr> <tr><td></td> <td colspan="2">subID</td> <td>String</td> <td>子设备id，同一个物联网关可级联多个子设备，通过子设备id实现独立控制</td> <td></td></tr> <tr><td></td> <td colspan="2">positionText</td> <td>string</td> <td>位置描述</td> <td>&quot;腾讯滨海大厦_滨海南塔_F18&quot;</td></tr> <tr><td></td> <td colspan="2">location</td> <td>array</td> <td>数组（父级别）</td> <td></td></tr> <tr><td></td> <td></td> <td>wId</td> <td>string</td> <td>对象的唯一标识</td> <td></td></tr> <tr><td></td> <td></td> <td>poiId</td> <td>string</td> <td>POI编号</td> <td></td></tr> <tr><td></td> <td></td> <td>name</td> <td>string</td> <td>设备名称</td> <td></td></tr> <tr><td></td> <td></td> <td>level</td> <td>number</td> <td>对象所属层级</td> <td></td></tr> <tr><td></td> <td></td> <td>longitude</td> <td>number</td> <td>经度gcj20</td> <td></td></tr> <tr><td></td> <td></td> <td>latitude</td> <td>number</td> <td>纬度</td> <td></td></tr> <tr><td></td> <td></td> <td>height</td> <td>number</td> <td>绝对高度</td> <td></td></tr></table></li> <li><p><strong>返回示例</strong></p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c25f5978-27e5-45be-8b49-dc4ce6e0b857&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;44030022302210250200047_9&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;优图盒子&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;boothId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北门_2501&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935307547835</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5231118649662</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">115.7</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w0713002&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;sn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;52E8DFBD562D41a0&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;din&quot;</span><span class="token operator">:</span> <span class="token string">&quot;144115194541786483&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;subId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_滨海北塔_25F_西梯-北门_2501&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a66348f2-0700-1000-abcd-35269c4636aa&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;440300223022&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935131878688</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.52347513938</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">-6.3</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fcbd41c0-dc95-46f8-9616-68e8b96f8c3d&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;44030022302210250200047&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;辅助分区（业务上无意义）&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935337645889</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5230878195398</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">115.7</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m99901000&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_F25_辅助分区（业务上无意义）&quot;</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token punctuation">{</span>
        ​<span class="token property">&quot;wId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6a1dcf46-f51f-4e39-893f-744d0220f70a&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4403002230221025&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F25&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.935356522636</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">22.5228336837518</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">115.7</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;poiCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m99999000&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;positionText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;腾讯滨海大厦_F25&quot;</span>​
      <span class="token punctuation">}</span>​
    <span class="token punctuation">]</span>​
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h1 id="_3-微瓴动态数据服务及接口"><a href="#_3-微瓴动态数据服务及接口" aria-hidden="true" class="header-anchor">#</a> <strong>3.</strong> <strong>微瓴动态数据服务及接口</strong></h1> <h2 id="_3-1-设备影子"><a href="#_3-1-设备影子" aria-hidden="true" class="header-anchor">#</a> 3.1.设备影子</h2> <p>(TODO 增加对设备影子的解释，放在这里或此处提示指向“名词解释”处)</p> <h3 id="_3-1-1-获取设备影子数据"><a href="#_3-1-1-获取设备影子数据" aria-hidden="true" class="header-anchor">#</a> 3.1.1.  获取设备影子数据</h3> <ul><li><strong>请求URL:</strong><code>/space/shadow/getDeviceShadow</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>数据类型</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>wId</td> <td>String</td> <td>是</td> <td>对象的唯一标识，非空且长度固定36位</td></tr> <tr><td>din</td> <td>String</td> <td>是</td> <td>设备编号</td></tr> <tr><td>Path</td> <td>String</td> <td>否</td> <td>查询的某个子属性，格式类似xxx,xxx，英文逗号分隔</td></tr> <tr><td>token</td> <td>String</td> <td>是</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/shadow/getDeviceShadow
?din=
&amp;path=
&amp;token
&amp;wId=a66348f2-0700-1000-abcd-35269c4636aa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>返回参数</strong></li></ul> <table><tr><td colspan="5">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="5">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="5">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="5">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td colspan="4">metadata</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">desired</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">SRS</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>timestamp</td> <td>time</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">reported</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">SRS</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>timestamp</td> <td>time</td> <td></td> <td></td></tr> <tr><td></td> <td colspan="4">state</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">desired</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">SRS</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">data</td> <td>time</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">SRS</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>KK</td> <td>string</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>SS</td> <td>number</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td colspan="3">reported</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td colspan="2">SRS</td> <td>array</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>KK</td> <td>string</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>SS</td> <td>number</td> <td></td> <td></td></tr> <tr><td></td> <td colspan="4">version</td> <td>string</td> <td></td> <td></td></tr> <tr><td></td> <td colspan="4">timestamp</td> <td>string</td> <td></td> <td></td></tr></table> <ul><li><strong>返回示例</strong></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​<span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ​<span class="token property">&quot;desired&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​<span class="token property">&quot;SRS&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​<span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1564057658312</span>​
        <span class="token punctuation">}</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​<span class="token property">&quot;SRS&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​<span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1564056186881</span>​
        <span class="token punctuation">}</span>​
      <span class="token punctuation">}</span>​
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ​<span class="token property">&quot;desired&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​<span class="token property">&quot;SRS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4326&quot;</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​<span class="token property">&quot;SRS&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​<span class="token property">&quot;KK&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AAAA&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;SS&quot;</span><span class="token operator">:</span> <span class="token number">4326</span>​
        <span class="token punctuation">}</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​<span class="token property">&quot;SRS&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​<span class="token property">&quot;KK&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AAAA&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;SS&quot;</span><span class="token operator">:</span> <span class="token number">4326</span>​
        <span class="token punctuation">}</span>​
      <span class="token punctuation">}</span>​
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span>
    ​<span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-07-25T05:28:01.517+0000&quot;</span>​
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="_3-1-2-更新设备影子期望数据接口"><a href="#_3-1-2-更新设备影子期望数据接口" aria-hidden="true" class="header-anchor">#</a> 3.1.2.  更新设备影子期望数据接口</h3> <ul><li><strong>请求URL:</strong><code>/space/shadow/updateDesired</code></li> <li><strong>请求方式:</strong><code>POST</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>数据约束</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>token</td> <td>String</td> <td>是</td> <td>非空且长度固定128个字符</td> <td>动态密钥，有效期20分钟，需重新登录</td></tr> <tr><td>wId</td> <td>String</td> <td>是</td> <td>非空且长度固定36位</td> <td>对象的唯一标识</td></tr> <tr><td>din</td> <td>String</td> <td>是</td> <td></td> <td>设备编号</td></tr> <tr><td>version</td> <td>String</td> <td>是</td> <td></td> <td>影子版本version</td></tr></tbody></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/shadow/updateDesired
?din=
&amp;version=
&amp;token=xxx_xxx
&amp;wId=a66348f2-0700-1000-abcd-35269c4636aa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>请求包体</strong></li></ul> <p><strong>格式： application/json</strong></p> <p><strong>body: JSON  Object</strong></p> <p>{&quot;SRS&quot;: 4326, &quot;MSG_ID&quot;: 100004529, &quot;Order_ID&quot;: [0], &quot;Robot_ID&quot;: &quot;111111111111111113&quot;, &quot;Robot_Pose&quot;: [0, 0], &quot;Robot_EStop&quot;: 0, &quot;Robot_Power&quot;: 0, &quot;Robot_Bumper&quot;: 0, &quot;Robot_Velocity&quot;: 0.00, &quot;Robot_Temperature&quot;: 0.00}</p> <ul><li><strong>返回参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>code</td> <td>String</td> <td>是</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td>success</td> <td>Boolean</td> <td>是</td> <td>返回信息；true 表示成功，false 表示出错</td></tr></tbody></table> <ul><li><strong>返回示例</strong></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
​  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">20029</span><span class="token punctuation">,</span>
​  <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-2-业务历史数据"><a href="#_3-2-业务历史数据" aria-hidden="true" class="header-anchor">#</a> 3.2.业务历史数据</h2> <h3 id="_3-2-1-获取设备原始历史数据"><a href="#_3-2-1-获取设备原始历史数据" aria-hidden="true" class="header-anchor">#</a> 3.2.1.  获取设备原始历史数据</h3> <ul><li><strong>请求URL:</strong><code>/space/datahub/raw-data/getDeviceData</code></li> <li><strong>请求方式:</strong><code>GET</code></li></ul> <p>注意：有权限控制，拉取对应的数据需要配置权限。</p> <ul><li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th> <th><strong>数据约束</strong></th></tr></thead> <tbody><tr><td>din</td> <td>String</td> <td>是</td> <td>要拉取的设备的appId</td> <td></td></tr> <tr><td>dp</td> <td>String</td> <td>是</td> <td>对应datapoint</td> <td></td></tr> <tr><td>beginRecordId</td> <td>String</td> <td>否</td> <td>起始记录id，可从返回结果中获取, beginRecordId第一次可以不填</td> <td></td></tr> <tr><td>endRecordId</td> <td>String</td> <td>否</td> <td>终止记录id</td> <td></td></tr> <tr><td>limit</td> <td>int</td> <td>否</td> <td>拉取数量限制，最大500</td> <td></td></tr> <tr><td>token</td> <td>String</td> <td>是</td> <td>鉴权token</td> <td></td></tr> <tr><td>beginTime</td> <td>Long</td> <td>否</td> <td>开始时间，毫秒时间戳</td> <td></td></tr> <tr><td>endTime</td> <td>Long</td> <td>否</td> <td>结束时间，毫秒时间戳</td> <td></td></tr> <tr><td>timeDesc</td> <td>Boolean</td> <td>否</td> <td>true 从最近记录查询     false 从最早记录查询</td> <td></td></tr></tbody></table> <ul><li><p><strong>返回参数</strong></p> <table><tr><td colspan="3">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="3">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="3">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="3">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td colspan="2">UinType</td> <td>string</td> <td>设备标识类型，可是第三方ID体系</td> <td>&quot;DIN&quot;,&quot;UUID&quot;,&quot;WID&quot;等都可以</td></tr> <tr><td></td> <td colspan="2">DP</td> <td>string</td> <td>上报方式</td> <td>100005552</td></tr> <tr><td></td> <td colspan="2">Year</td> <td>number</td> <td>年</td> <td>2019</td></tr> <tr><td></td> <td colspan="2">Month</td> <td>number</td> <td>月</td> <td>12</td></tr> <tr><td></td> <td colspan="2">DayInMonth</td> <td>number</td> <td>当月的第几天</td> <td>11</td></tr> <tr><td></td> <td colspan="2">Hour</td> <td>string</td> <td>小时</td> <td></td></tr> <tr><td></td> <td colspan="2">Minute</td> <td>number</td> <td>分</td> <td>5</td></tr> <tr><td></td> <td colspan="2">Second</td> <td>number</td> <td>秒</td> <td>5</td></tr> <tr><td></td> <td colspan="2">DayInWeek</td> <td>number</td> <td>当周的第几天</td> <td>2</td></tr> <tr><td></td> <td colspan="2">record_id</td> <td>string</td> <td>记录id</td> <td>&quot;5c0f1b519aa3c470455af079&quot;</td></tr> <tr><td></td> <td colspan="2">MsgTS</td> <td>number</td> <td>时间戳</td> <td>1544493905</td></tr> <tr><td></td> <td colspan="2">Api</td> <td>string</td> <td>API类型</td> <td>report data Point</td></tr> <tr><td></td> <td colspan="2">Uin</td> <td>String</td> <td>DIN物联设备唯一标识，可以是物联网关</td> <td>DIN：&quot;144115194553693415&quot;,<br>wId：&quot;0007e43d-45d7-44c0-acfc-fc5539b6516a&quot;,</td></tr> <tr><td></td> <td colspan="2">Seq</td> <td>String</td> <td></td> <td></td></tr> <tr><td></td> <td colspan="2">value</td> <td>array</td> <td>数组（父级别）</td> <td>自定义消息体</td></tr> <tr><td></td> <td></td> <td>status</td> <td>number</td> <td>根据项目可变消息体</td> <td></td></tr> <tr><td></td> <td></td> <td>Robot_ID</td> <td>string</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td>Msg_ID</td> <td>number</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td>Lock_ID</td> <td>string</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td>longitude</td> <td>number</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td>latitude</td> <td>number</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td>height</td> <td>number</td> <td></td> <td></td></tr></table></li> <li><p><strong>请求示例</strong></p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/datahub/raw-data/getDeviceData
?din=
&amp;dp=
&amp;token=
&amp;wId=a66348f2-0700-1000-abcd-35269c4636aa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>返回示例</strong></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    ​<span class="token punctuation">{</span>
      ​<span class="token property">&quot;UinType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;din&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Hour&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;DP&quot;</span><span class="token operator">:</span> <span class="token number">100005552</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;DayInWeek&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Month&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;record_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5c0f1b519aa3c470455af079&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;MsgTS&quot;</span><span class="token operator">:</span> <span class="token number">1544493905</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;DayInMonth&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Minute&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Second&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Year&quot;</span><span class="token operator">:</span> <span class="token number">2018</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;report_data_point&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;Uin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;144115194553693415&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​<span class="token property">&quot;Status&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;Robot_ID&quot;</span><span class="token operator">:</span> <span class="token string">&quot;144115194553693415&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;MSG_ID&quot;</span><span class="token operator">:</span> <span class="token number">100005552</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;Lock_ID&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span>​
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;seq&quot;</span><span class="token operator">:</span> <span class="token string">&quot;277&quot;</span>​
    <span class="token punctuation">}</span>​
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_3-2-2-获取应用原始历史数据"><a href="#_3-2-2-获取应用原始历史数据" aria-hidden="true" class="header-anchor">#</a> 3.2.2.  获取应用原始历史数据</h3> <ul><li><strong>请求URL:</strong><code>/space/datahub/raw-data/getAppData</code></li> <li><strong>请求方式:</strong><code>GET</code></li> <li><strong>请求参数</strong></li></ul> <table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th> <th>**数据约束 **</th></tr></thead> <tbody><tr><td>appId</td> <td>Long</td> <td>是</td> <td>要拉取的应用的appId</td> <td></td></tr> <tr><td>beginRecordId</td> <td>String</td> <td>否</td> <td>起始记录id，可从返回结果中获取beginRecordId第一次可以不填</td> <td></td></tr> <tr><td>endRecordId</td> <td>String</td> <td>否</td> <td>终止记录id</td> <td></td></tr> <tr><td>limit</td> <td>int</td> <td>否</td> <td>拉取数量限制，最大500</td> <td></td></tr> <tr><td>token</td> <td>String</td> <td>是</td> <td>动态密钥，有效期20分钟，需重新登录</td> <td></td></tr> <tr><td>beginTime</td> <td>Long</td> <td>否</td> <td>开始时间，毫秒时间戳</td> <td></td></tr> <tr><td>endTime</td> <td>Long</td> <td>否</td> <td>结束时间，毫秒时间戳</td> <td></td></tr> <tr><td>timeDesc</td> <td>Boolean</td> <td>否</td> <td>true 从最近记录查询 false 从最早记录查询</td> <td></td></tr></tbody></table> <ul><li><strong>返回参数</strong></li></ul> <table><tr><td colspan="2">名称</td> <td>类型</td> <td>说明</td> <td>示范值</td></tr> <tr><td colspan="2">code</td> <td>number</td> <td>返回码</td> <td>返回码；0表示成功，非0表示出错</td></tr> <tr><td colspan="2">success</td> <td>Boolean</td> <td>错误信息</td> <td>返回信息；true 表示成功，false 表示出错</td></tr> <tr><td colspan="2">data</td> <td>array</td> <td>对象数组</td> <td></td></tr> <tr><td></td> <td>record_id</td> <td>string</td> <td>记录id</td> <td>&quot;5c0f1b519aa3c470455af079&quot;</td></tr> <tr><td></td> <td>message_type</td> <td>string</td> <td>消息体类型</td> <td>1000201</td></tr> <tr><td></td> <td>to_appid</td> <td>string</td> <td>到应用id</td> <td></td></tr> <tr><td></td> <td>msg_attribute</td> <td>string</td> <td>消息属性</td> <td>ack</td></tr> <tr><td></td> <td>content</td> <td>object</td> <td>内容字段</td> <td>待补充，不用应用不同包体</td></tr></table> <ul><li><strong>请求示例</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/space/datahub/raw-data/getAppData
?appId=40309
&amp;beginRecordId=5cbfc05abf8e647ef1cb84bc
&amp;limit=10
&amp;token=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>返回示例</strong></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ​
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    ​<span class="token punctuation">{</span>
      ​
      <span class="token property">&quot;record_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5cc94b4e14fe80600897a522&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;message_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1000201&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;to_appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;40191&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;msg_attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ack&quot;</span><span class="token punctuation">,</span>
      ​<span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​
        <span class="token property">&quot;ai_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;device_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;144115192401798329&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;ai_client_id&quot;</span><span class="token operator">:</span> <span class="token number">1001</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;ai_cmd&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;task_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;62bf3279-2550-4d22-a020-34e72f9855c4&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;ai_type&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;ai_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v1.0&quot;</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;ai_body&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ​
          <span class="token property">&quot;start_time&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​
          <span class="token property">&quot;$numberLong&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1555904506687&quot;</span>
          ​
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;similarity&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        ​<span class="token property">&quot;end_time&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          ​
          <span class="token property">&quot;$numberLong&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1555904516687&quot;</span>
          ​
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;device_ids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            ​<span class="token string">&quot;144115192401798329&quot;</span>
            ​
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;time_interval&quot;</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;person_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;98242671-5F46-47E6-98AB-15A4A865475C&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;top_num&quot;</span><span class="token operator">:</span> <span class="token number">50</span>
          ​
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;ex_info&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ARMTASK&quot;</span><span class="token punctuation">,</span>
          ​<span class="token property">&quot;client_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;40338&quot;</span>
          ​
          <span class="token punctuation">}</span>
        ​
        <span class="token punctuation">}</span>
      ​
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
  ​<span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="_3-3-消息订阅"><a href="#_3-3-消息订阅" aria-hidden="true" class="header-anchor">#</a> 3.3.消息订阅</h2> <h2 id="_3-4-告警-通知消息上报"><a href="#_3-4-告警-通知消息上报" aria-hidden="true" class="header-anchor">#</a> 3.4.告警/通知消息上报</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Video_service.html" class="prev">视频服务</a></span> <span class="next"><a href="/data_space/Metro_documents.html">业务场景接口文档--地铁场景</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db21f27a.js" defer></script><script src="/assets/js/2.82b08f5a.js" defer></script><script src="/assets/js/5.ddaaa47b.js" defer></script>
  </body>
</html>
