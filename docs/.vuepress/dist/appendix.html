<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>附录 | OPEN API Doc</title>
    <meta name="description" content="接口说明文档">
    <link rel="icon" href="/bitbug_favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.584498ef.css" as="style"><link rel="preload" href="/assets/js/app.db21f27a.js" as="script"><link rel="preload" href="/assets/js/2.82b08f5a.js" as="script"><link rel="preload" href="/assets/js/12.d0a30bd4.js" as="script"><link rel="prefetch" href="/assets/js/10.22aa21c7.js"><link rel="prefetch" href="/assets/js/11.2b479cd9.js"><link rel="prefetch" href="/assets/js/13.e1c32ab9.js"><link rel="prefetch" href="/assets/js/14.a358029f.js"><link rel="prefetch" href="/assets/js/15.b95dcb64.js"><link rel="prefetch" href="/assets/js/3.69a9e6aa.js"><link rel="prefetch" href="/assets/js/4.2a9a9e3e.js"><link rel="prefetch" href="/assets/js/5.ddaaa47b.js"><link rel="prefetch" href="/assets/js/6.898b7d41.js"><link rel="prefetch" href="/assets/js/7.04069a34.js"><link rel="prefetch" href="/assets/js/8.13be9294.js"><link rel="prefetch" href="/assets/js/9.4b85b1ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.584498ef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OPEN API Doc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Guide.html" class="sidebar-link">接入指南</a></li><li><a href="/IOT.html" class="sidebar-link">IOT通讯协议</a></li><li><a href="/Application_of_API.html" class="sidebar-link">应用API</a></li><li><a href="/Video_service.html" class="sidebar-link">视频服务</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数字空间</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Error_code.html" class="sidebar-link">错误码</a></li><li><a href="/appendix.html" class="active sidebar-link">附录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/appendix.html#消息格式" class="sidebar-link">消息格式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/appendix.html#消息同步格式" class="sidebar-link">消息同步格式</a></li><li class="sidebar-sub-header"><a href="/appendix.html#回复推送消息" class="sidebar-link">回复推送消息</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="附录"><a href="#附录" aria-hidden="true" class="header-anchor">#</a> 附录</h1> <h2 id="消息格式"><a href="#消息格式" aria-hidden="true" class="header-anchor">#</a> 消息格式</h2> <h3 id="消息同步格式"><a href="#消息同步格式" aria-hidden="true" class="header-anchor">#</a> 消息同步格式</h3> <h4 id="消息类型"><a href="#消息类型" aria-hidden="true" class="header-anchor">#</a> 消息类型</h4> <table><thead><tr><th style="text-align:center;">message_type</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;">1000100</td> <td style="text-align:center;">文本消息上报至平台作为数据存储</td></tr> <tr><td style="text-align:center;">1000101</td> <td style="text-align:center;">Json 消息上报至平台作为数据存储</td></tr> <tr><td style="text-align:center;">1000200</td> <td style="text-align:center;">发送文本消息至其他应用系统</td></tr> <tr><td style="text-align:center;">1000201</td> <td style="text-align:center;">发送 Json 消息至其他应用系统</td></tr> <tr><td style="text-align:center;">1000300</td> <td style="text-align:center;">推送告警类消息给微瓴平台，不直接推送给应用，微瓴平台会针对告警消息的业务类别推送给相应的业务应用</td></tr> <tr><td style="text-align:center;">1000302</td> <td style="text-align:center;">推送告警类消息给微瓴平台，不直接推送给应用，微瓴平台会针对告警消息的业务类别推送给相应的业务应用</td></tr> <tr><td style="text-align:center;">1000400</td> <td style="text-align:center;">推送通知类消息给微瓴平台，不直接推送给应用，微瓴平台会针对通知消息的业务类别推送给相应的业务应用</td></tr> <tr><td style="text-align:center;">1000500</td> <td style="text-align:center;">推送普通消息给微瓴平台作为数据存储，不推送给应用</td></tr></tbody></table> <h5 id="_1000100"><a href="#_1000100" aria-hidden="true" class="header-anchor">#</a> 1000100</h5> <ul><li>请求参数</li></ul> <table><thead><tr><th style="text-align:center;">请求参数</th> <th style="text-align:center;">参数类型</th> <th style="text-align:center;">参数说明</th></tr></thead> <tbody><tr><td style="text-align:center;">content</td> <td style="text-align:center;">String</td> <td style="text-align:center;">消息内容</td></tr></tbody></table> <ul><li>示例</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;message_type&quot;</span><span class="token operator">:</span><span class="token number">1000100</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;test content&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_1000101"><a href="#_1000101" aria-hidden="true" class="header-anchor">#</a> 1000101</h5> <ul><li>请求参数</li></ul> <table><thead><tr><th style="text-align:center;">请求参数</th> <th style="text-align:center;">参数类型</th> <th style="text-align:center;">参数说明</th></tr></thead> <tbody><tr><td style="text-align:center;">content</td> <td style="text-align:center;">json</td> <td style="text-align:center;">消息内容</td></tr></tbody></table> <ul><li>示例:</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;message_type&quot;</span><span class="token operator">:</span> <span class="token number">1000101</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;key1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;key2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_1000200"><a href="#_1000200" aria-hidden="true" class="header-anchor">#</a> 1000200</h5> <ul><li>请求参数</li></ul> <table><thead><tr><th style="text-align:center;">请求参数</th> <th style="text-align:center;">参数类型</th> <th style="text-align:center;">参数说明</th></tr></thead> <tbody><tr><td style="text-align:center;">to_appid</td> <td style="text-align:center;">String</td> <td style="text-align:center;">目标 appid</td></tr> <tr><td style="text-align:center;">msg_attribute</td> <td style="text-align:center;">String</td> <td style="text-align:center;">消息属性。ack：根据之前的消息返回，active：主动发起</td></tr> <tr><td style="text-align:center;">msg_id</td> <td style="text-align:center;">Integer</td> <td style="text-align:center;">当消息属性为 ack 时，该字段为必填项，否则不用填</td></tr> <tr><td style="text-align:center;">content</td> <td style="text-align:center;">String</td> <td style="text-align:center;">消息内容</td></tr></tbody></table> <ul><li>示例:</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;message_type&quot;</span><span class="token operator">:</span> <span class="token number">1000101</span><span class="token punctuation">,</span>
  <span class="token property">&quot;to_appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg_attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ack&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;msg_id&quot;</span><span class="token operator">:</span> <span class="token number">85581</span><span class="token punctuation">,</span>
 <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text test!&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="_1000201"><a href="#_1000201" aria-hidden="true" class="header-anchor">#</a> 1000201</h5> <ul><li>请求参数</li></ul> <table><thead><tr><th style="text-align:center;">请求参数</th> <th style="text-align:center;">参数类型</th> <th style="text-align:center;">参数说明</th></tr></thead> <tbody><tr><td style="text-align:center;">to_appid</td> <td style="text-align:center;">String</td> <td style="text-align:center;">目标 appid</td></tr> <tr><td style="text-align:center;">msg_attribute</td> <td style="text-align:center;">String</td> <td style="text-align:center;">消息属性。ack：根据之前的消息返回，active：主动发起</td></tr> <tr><td style="text-align:center;">msg_id</td> <td style="text-align:center;">Integer</td> <td style="text-align:center;">当消息属性为 ack 时，该字段为必填项，否则不用填</td></tr> <tr><td style="text-align:center;">content</td> <td style="text-align:center;">JsonObject</td> <td style="text-align:center;">消息内容</td></tr></tbody></table> <ul><li>示例:</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;message_type&quot;</span><span class="token operator">:</span> <span class="token number">1000101</span><span class="token punctuation">,</span>
  <span class="token property">&quot;to_appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*****&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg_attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ack&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg_id&quot;</span><span class="token operator">:</span> <span class="token number">85581</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;key1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;key2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="_1000300-告警数据"><a href="#_1000300-告警数据" aria-hidden="true" class="header-anchor">#</a> <a href="#%E5%91%8A%E8%AD%A6%E6%95%B0%E6%8D%AE">1000300|告警数据</a></h5> <h5 id="_1000302-消警数据格式说明"><a href="#_1000302-消警数据格式说明" aria-hidden="true" class="header-anchor">#</a> <a href="#%E6%B6%88%E8%AD%A6%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E">1000302|消警数据格式说明</a></h5> <h5 id="_1000400-通知类数据"><a href="#_1000400-通知类数据" aria-hidden="true" class="header-anchor">#</a> <a href="#%E9%80%9A%E7%9F%A5%E7%B1%BB%E6%95%B0%E6%8D%AE">1000400|通知类数据</a></h5> <h5 id="_1000500-普通推送上报"><a href="#_1000500-普通推送上报" aria-hidden="true" class="header-anchor">#</a> <a href="#1-%E6%99%AE%E9%80%9A%E4%B8%8A%E6%8A%A5">1000500|普通推送上报</a></h5> <h3 id="回复推送消息"><a href="#回复推送消息" aria-hidden="true" class="header-anchor">#</a> 回复推送消息</h3> <ul><li>收到推送消息后，需要回复一个 json 格式如下</li></ul> <table><thead><tr><th style="text-align:center;">请求参数</th> <th style="text-align:center;">参数类型</th> <th style="text-align:center;">参数说明</th></tr></thead> <tbody><tr><td style="text-align:center;">code</td> <td style="text-align:center;">number</td> <td style="text-align:center;">回复为 0</td></tr> <tr><td style="text-align:center;">cookie</td> <td style="text-align:center;">String</td> <td style="text-align:center;">推送报文中的 cookie</td></tr></tbody></table> <ul><li>示例</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// mvs 推送的消息为</span>
<span class="token comment">// 注意这里的cookie需要回复给接收端</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;apiName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;report_data_point&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cookie&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16198_577418&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;din&quot;</span><span class="token operator">:</span> <span class="token string">&quot;********&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">20134</span><span class="token punctuation">,</span>
  <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1511802600575</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;{\&quot;V\&quot;:1,\&quot;subid\&quot;:\&quot;0900009\&quot;,\&quot;list\&quot;:[{\&quot;func\&quot;:\&quot;CO2\&quot;,\&quot;value\&quot;:\&quot;972180.00\&quot;}],\&quot;timestamp\&quot;:1511802557768}&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;seq&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">//接收方应该回复</span>
<span class="token punctuation">{</span> <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">&quot;cookie&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16198_577418&quot;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Error_code.html" class="prev">错误码</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db21f27a.js" defer></script><script src="/assets/js/2.82b08f5a.js" defer></script><script src="/assets/js/12.d0a30bd4.js" defer></script>
  </body>
</html>
